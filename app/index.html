<html>
  <head>
    <title>Embark</title>


    <!-- build:css css/app.css -->
    <link rel="stylesheet" href="components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="components/bootstrap/dist/css/bootstrap-theme.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="components/darkroom/build/darkroom.css">
    <!-- endbuild -->


  </head>
  <body>
    <h3>Welcome to Embark!</h3>
    <p>See the <a href="https://github.com/iurimatias/embark-framework/wiki">Wiki</a> to see what you can do with Embark!</p>

    <div>
        File Upload:
      <input type="file" id="fileUpload" onchange="loadFile(this)">
      <img id="uploadedImage">
    </div>


    <div>
      <input type="text" id="hashUrl">
      <button onclick="loadImage(getElementById('uploadedImage'), getElementById('hashUrl').value);">Load Image</button>
    </div>


    <div id="log">
      This is log
    </div>
    <!-- build:js js/embark.js -->
    <script src="js/app.js"></script>
    <!-- endbuild -->

    <!-- build:js js/vendor.js -->
    <script src="components/jquery/dist/jquery.min.js"></script>
    <script src="components/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- endbuild -->

    <!-- build:js js/base.js -->
    <script src="js/helper.js"></script>
    <script src="js/index.js"></script>
    <script src="js/script.js"></script>
    <!-- endbuild -->


    <script>
        function loadFile(element){
            files = element.files;
            // FileReader support
            if (FileReader && files && files.length) {
                var fr = new FileReader();
                fr.onload = function () {
                    document.getElementById('uploadedImage').src = fr.result;

                    addImage(document.getElementById('uploadedImage'), 'This is caption', 100,100,100).then(function(data){
                        console.log(data);
                        $('#log').append('<br>' + data.hash);
                    }, function(err){
                        $('#log').append('<br>' + err);
                    });
                };
                fr.readAsDataURL(files[0]);
            }

            // Not supported
            else {
                // fallback -- perhaps submit the input to an iframe and temporarily store
                // them on the server until the user's session ends.
            }
        }
    </script>

  </body>
</html>
